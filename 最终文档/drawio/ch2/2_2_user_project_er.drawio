<?xml version="1.0" encoding="UTF-8"?>
<mxfile host="app.diagrams.net">
  <diagram name="用户与项目成员关系E-R图" id="user_project_er">
    <mxGraphModel dx="900" dy="600" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="900" pageHeight="600">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>
        <!-- 实体 -->
        <mxCell id="user" value="User" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d0d0d0;strokeColor=#666666;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="80" y="220" width="120" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="user_attr" value="id (PK)&#xa;username&#xa;email&#xa;full_name&#xa;is_active" style="text;align=left;fillColor=#f0f0f0;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="80" y="290" width="120" height="80" as="geometry"/>
        </mxCell>
        <mxCell id="project" value="Project" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d0d0d0;strokeColor=#666666;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="600" y="220" width="120" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="project_attr" value="id (PK)&#xa;name&#xa;slug&#xa;is_private&#xa;owner_id (FK)" style="text;align=left;fillColor=#f0f0f0;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="600" y="290" width="120" height="80" as="geometry"/>
        </mxCell>
        <mxCell id="role" value="Role" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d0d0d0;strokeColor=#666666;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="340" y="420" width="120" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="role_attr" value="id (PK)&#xa;name&#xa;slug&#xa;permissions[]&#xa;project_id (FK)" style="text;align=left;fillColor=#f0f0f0;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="340" y="490" width="120" height="80" as="geometry"/>
        </mxCell>
        <!-- 关系 -->
        <mxCell id="membership" value="Membership&#xa;成员关系" style="rhombus;whiteSpace=wrap;html=1;fillColor=#e0e0e0;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="340" y="200" width="120" height="80" as="geometry"/>
        </mxCell>
        <mxCell id="membership_attr" value="id (PK)&#xa;is_admin&#xa;created_at&#xa;token&#xa;email" style="text;align=left;fillColor=#f0f0f0;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="340" y="100" width="120" height="80" as="geometry"/>
        </mxCell>
        <!-- 连线 -->
        <mxCell id="r1" style="strokeColor=#666666;endArrow=none;" parent="1" source="user" target="membership" edge="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="r2" style="strokeColor=#666666;endArrow=none;" parent="1" source="membership" target="project" edge="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="r3" style="strokeColor=#666666;endArrow=none;" parent="1" source="membership" target="role" edge="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <!-- 基数 -->
        <mxCell id="c1" value="n" style="text;align=center;" parent="1" vertex="1">
          <mxGeometry x="220" y="220" width="20" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="c2" value="m" style="text;align=center;" parent="1" vertex="1">
          <mxGeometry x="560" y="220" width="20" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="c3" value="1" style="text;align=center;" parent="1" vertex="1">
          <mxGeometry x="400" y="380" width="20" height="20" as="geometry"/>
        </mxCell>
        <!-- 拥有关系 -->
        <mxCell id="owns" value="拥有" style="rhombus;whiteSpace=wrap;html=1;fillColor=#e0e0e0;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="340" y="40" width="80" height="40" as="geometry"/>
        </mxCell>
        <mxCell id="r4" style="strokeColor=#666666;endArrow=none;dashed=1;" parent="1" source="user" target="owns" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points"><mxPoint x="140" y="60"/></Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="r5" style="strokeColor=#666666;endArrow=none;dashed=1;" parent="1" source="owns" target="project" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points"><mxPoint x="660" y="60"/></Array>
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
